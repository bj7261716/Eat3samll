<!DOCTYPE html>
<html lang="zh-TW">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <meta name="description" content="æ™ºæ…§ç¾é£Ÿæ¨è–¦ç³»çµ± - æ ¹æ“šå€‹äººåå¥½å¿«é€Ÿæ‰¾åˆ°é™„è¿‘çš„é¤å»³ï¼Œæä¾›åœ°åœ–å°èˆªåŠŸèƒ½">
  <meta name="keywords" content="ç¾é£Ÿæ¨è–¦, é¤å»³æœå°‹, åœ°åœ–å°èˆª, æ–™ç†é¡å‹, åƒ¹æ ¼ç¯©é¸">
  <meta name="author" content="Eat3Small">
  
  <!-- Open Graph Meta Tags -->
  <meta property="og:title" content="æ™ºæ…§ç¾é£Ÿæ¨è–¦èˆ‡å°èˆªç³»çµ±">
  <meta property="og:description" content="å¿«é€Ÿæ‰¾åˆ°ç¬¦åˆæ‚¨åå¥½çš„é¤å»³ï¼Œä¸€éµå°èˆªå¸¶æ‚¨å‰å¾€">
  <meta property="og:type" content="website">
  
  <title>ğŸ½ï¸ Eat3Small - æ™ºæ…§ç¾é£Ÿæ¨è–¦ç³»çµ±</title>
  
  <!-- Favicon -->
  <link rel="icon" href="data:image/svg+xml,<svg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 100 100'><text y='.9em' font-size='90'>ğŸ½ï¸</text></svg>">
  
  <!-- Google Fonts -->
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&family=Noto+Sans+TC:wght@400;500;600;700&display=swap" rel="stylesheet">
  
  <!-- CSS Files -->
  <link rel="stylesheet" href="css/variables.css">
  <link rel="stylesheet" href="css/base.css">
  <link rel="stylesheet" href="css/components.css">
  <link rel="stylesheet" href="css/main.css">
</head>
<body>
  <!-- Skip to main content link for accessibility -->
  <a href="#main-content" class="skip-link">è·³åˆ°ä¸»è¦å…§å®¹</a>

  <div class="app">
    <!-- Header -->
    <header class="header">
      <div class="container">
        <div class="header-content">
          <a href="/" class="logo">
            <span class="logo-icon">ğŸ½ï¸</span>
            <span class="logo-text">Eat3Small</span>
          </a>
          
          <div class="header-actions">
            <button type="button" class="btn btn-icon" id="refreshLocationBtn" title="é‡æ–°å–å¾—ä½ç½®">
              ğŸ“
            </button>
          </div>
        </div>
      </div>
    </header>

    <!-- Main Content -->
    <main class="main" id="main-content">
      <!-- Search Section -->
      <section class="search-section">
        <div class="container">
          <div class="search-container">
            <h1 class="search-title">ğŸ” æ¢ç´¢ç¾é£Ÿï¼Œå¾é€™è£¡é–‹å§‹</h1>
            
            <form class="search-form" id="searchForm">
              <!-- Cuisine Type -->
              <div class="form-group">
                <label class="form-label">æ–™ç†é¡å‹</label>
                <div class="checkbox-group" id="cuisineTypes">
                  <!-- Will be populated by JavaScript -->
                </div>
              </div>

              <!-- Price Level and Distance -->
              <div class="search-row">
                <!-- Price Level -->
                <div class="form-group">
                  <label class="form-label">åƒ¹æ ¼å€é–“</label>
                  <div class="checkbox-group" id="priceLevels">
                    <!-- Will be populated by JavaScript -->
                  </div>
                </div>

                <!-- Distance -->
                <div class="form-group">
                  <label class="form-label">è·é›¢ç¯„åœ</label>
                  <div class="slider-container">
                    <input 
                      type="range" 
                      class="slider" 
                      id="distanceSlider" 
                      min="0" 
                      max="3" 
                      value="1" 
                      step="1"
                      aria-label="é¸æ“‡æœå°‹è·é›¢"
                    >
                    <span class="slider-value" id="distanceValue">3 å…¬é‡Œ</span>
                  </div>
                </div>
              </div>

              <!-- Time Slot -->
              <div class="form-group">
                <label class="form-label">ç‡Ÿæ¥­æ™‚æ®µ</label>
                <div class="radio-group" id="timeSlots">
                  <div class="radio-item">
                    <input type="radio" name="timeSlot" id="timeSlotAll" value="all" checked>
                    <label for="timeSlotAll" class="radio-label">å…¨éƒ¨</label>
                  </div>
                  <div class="radio-item">
                    <input type="radio" name="timeSlot" id="timeSlotOpen" value="open">
                    <label for="timeSlotOpen" class="radio-label">ç›®å‰ç‡Ÿæ¥­ä¸­</label>
                  </div>
                  <div class="radio-item">
                    <input type="radio" name="timeSlot" id="timeSlotLunch" value="lunch">
                    <label for="timeSlotLunch" class="radio-label">åˆé¤æ™‚æ®µ</label>
                  </div>
                  <div class="radio-item">
                    <input type="radio" name="timeSlot" id="timeSlotDinner" value="dinner">
                    <label for="timeSlotDinner" class="radio-label">æ™šé¤æ™‚æ®µ</label>
                  </div>
                </div>
              </div>

              <!-- Actions -->
              <div class="search-actions">
                <button type="button" class="btn btn-secondary" id="resetBtn">
                  ğŸ”„ é‡ç½®æ¢ä»¶
                </button>
                <button type="submit" class="btn btn-primary btn-lg">
                  ğŸ” æœå°‹ç¾é£Ÿ
                </button>
              </div>
            </form>
          </div>
        </div>
      </section>

      <!-- Results Section -->
      <section class="results-section container" id="resultsSection">
        <!-- Results Header -->
        <div class="results-header hidden" id="resultsHeader">
          <div>
            <h2 class="results-title">
              æ¨è–¦é¤å»³
              <span class="results-count" id="resultsCount"></span>
            </h2>
          </div>
          
          <div class="view-toggle">
            <button type="button" class="active" id="listViewBtn" data-view="list">
              ğŸ“‹ åˆ—è¡¨
            </button>
            <button type="button" id="mapViewBtn" data-view="map">
              ğŸ—ºï¸ åœ°åœ–
            </button>
          </div>
        </div>

        <!-- Sorting & Filtering (optional, can be shown when results exist) -->
        <div class="filters-bar hidden" id="filtersBar">
          <span class="filters-label">æ’åºæ–¹å¼ï¼š</span>
          <select class="filters-select" id="sortSelect">
            <option value="relevance">æ¨è–¦æ’åº</option>
            <option value="rating">è©•åˆ†é«˜è‡³ä½</option>
            <option value="distance">è·é›¢è¿‘è‡³é </option>
            <option value="reviews">è©•è«–æ•¸å¤šè‡³å°‘</option>
          </select>
        </div>

        <!-- List View -->
        <div class="results-list" id="resultsList">
          <!-- Restaurant cards will be inserted here by JavaScript -->
        </div>

        <!-- Map View -->
        <div class="results-map hidden" id="resultsMap">
          <div id="map"></div>
        </div>

        <!-- Empty State -->
        <div class="empty-state" id="emptyState">
          <div class="empty-state-icon">ğŸ½ï¸</div>
          <h3 class="empty-state-title">æº–å‚™å¥½æ¢ç´¢ç¾é£Ÿäº†å—ï¼Ÿ</h3>
          <p class="empty-state-description">
            è¨­å®šæ‚¨çš„åå¥½æ¢ä»¶ï¼Œè®“æˆ‘å€‘ç‚ºæ‚¨æ¨è–¦é™„è¿‘çš„å¥½é¤å»³ï¼
          </p>
        </div>

        <!-- No Results State -->
        <div class="empty-state hidden" id="noResultsState">
          <div class="empty-state-icon">ğŸ˜”</div>
          <h3 class="empty-state-title">æ‰¾ä¸åˆ°ç¬¦åˆæ¢ä»¶çš„é¤å»³</h3>
          <p class="empty-state-description">
            è©¦è©¦èª¿æ•´æœå°‹æ¢ä»¶ï¼Œæˆ–å¢åŠ è·é›¢ç¯„åœ
          </p>
          <button type="button" class="btn btn-primary" id="retrySearchBtn">
            ğŸ”„ é‡æ–°æœå°‹
          </button>
        </div>
      </section>
    </main>

    <!-- Footer -->
    <footer class="footer">
      <div class="container">
        <div class="footer-content">
          <div class="footer-links">
            <a href="#" class="footer-link">é—œæ–¼æˆ‘å€‘</a>
            <a href="#" class="footer-link">éš±ç§æ¬Šæ”¿ç­–</a>
            <a href="#" class="footer-link">ä½¿ç”¨æ¢æ¬¾</a>
          </div>
          <p>&copy; 2025 Eat3Small. Powered by Google Maps Platform.</p>
        </div>
      </div>
    </footer>
  </div>

  <!-- Loading Overlay -->
  <div class="loading-overlay hidden" id="loadingOverlay">
    <div class="loading-content">
      <div class="loader"></div>
      <p class="loading-text" id="loadingText">è¼‰å…¥ä¸­...</p>
    </div>
  </div>

  <!-- Alert Container (for notifications) -->
  <div id="alertContainer" style="position: fixed; top: 80px; right: 20px; z-index: 9999; max-width: 400px;">
    <!-- Alerts will be inserted here -->
  </div>

  <!-- Configuration -->
  <script src="js/config.js"></script>
  
  <!-- Google Maps API -->
  <script>
    // Load Google Maps API dynamically with the API key from config
    (function() {
      if (typeof GOOGLE_MAPS_API_KEY === 'undefined' || GOOGLE_MAPS_API_KEY === 'YOUR_GOOGLE_MAPS_API_KEY_HERE') {
        console.warn('Google Maps API key not configured. Please set GOOGLE_MAPS_API_KEY in js/config.js');
        // Show alert to user
        setTimeout(() => {
          const alertDiv = document.createElement('div');
          alertDiv.className = 'alert alert-warning';
          alertDiv.innerHTML = '<strong>âš ï¸ è«‹è¨­å®š API é‡‘é‘°</strong><br>è«‹åƒè€ƒ README.md ä¸­çš„èªªæ˜è¨­å®š Google Maps API é‡‘é‘°';
          document.getElementById('alertContainer').appendChild(alertDiv);
        }, 1000);
      } else {
        const script = document.createElement('script');
        script.src = `https://maps.googleapis.com/maps/api/js?key=${GOOGLE_MAPS_API_KEY}&libraries=places&callback=initMap&language=zh-TW`;
        script.async = true;
        script.defer = true;
        document.head.appendChild(script);
      }
    })();
  </script>
  
  <!-- Application Scripts -->
  <script src="js/storage.js"></script>
  <script src="js/geolocation.js"></script>
  <script src="js/places.js"></script>
  <script src="js/map.js"></script>
  <script src="js/ui.js"></script>
  <script src="js/main.js"></script>
</body>
</html>
